{% extends "base.html" %}
{% block title %}Ù†Ø¸Ø§Ù… Ø§Ù„Ø´ÙƒØ§ÙˆÙŠ - ØªØªØ¨Ø¹ Ø§Ù„Ø´ÙƒÙˆÙ‰{% endblock %}
{% block content %}
<div class="text-center mb-4" data-aos="fade-down">
  <p class="lead">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø±Ø§Ø¨Ø· Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© Ù„ÙƒÙŠ ØªØªÙ…ÙƒÙ† Ù…Ù† ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰.</p>
  <button id="copyLinkBtn" class="btn btn-primary">
    ğŸ“‹ Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø©
  </button>
  <small id="copyMsg" class="text-success ms-2" style="display:none;">âœ” ØªÙ… Ø§Ù„Ù†Ø³Ø®</small>
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
  {{ message }}
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Ø¥ØºÙ„Ø§Ù‚"></button>
</div>
{% endfor %}
{% endif %}
{% endwith %}

<div class="card shadow-sm" data-aos="fade-up">
  <div class="card-body">
    <h2 class="card-title mb-3">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙƒÙˆÙ‰</h2>

    <p><strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø´ØªÙƒÙŠ:</strong> {{ complaint.name }}</p>
    <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> {{ complaint.phone }}</p>
    <p><strong>Ø§Ù„Ø§ÙŠÙ…ÙŠÙ„:</strong> {{ complaint.email }}</p>
    <p><strong>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø´ÙƒÙˆÙ‰:</strong> {{ complaint.title }}</p>
    <p><strong>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´ÙƒÙˆÙ‰:</strong> {{ complaint.content }}</p>
    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong>
      {% if complaint.status == "waiting" %}
      <span class="badge bg-warning text-dark">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>
      {% elif complaint.status == "in process" %}
      <span class="badge bg-info text-dark">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
      {% elif complaint.status == "complete" %}
      <span class="badge bg-success">Ù…ÙƒØªÙ…Ù„Ø©</span>
      {% else %}
      <span class="badge bg-secondary">ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</span>
      {% endif %}
    </p>
    <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:</strong> {{ complaint.created_at.strftime("%Y-%m-%d %H:%M") }}</p>
  </div>
</div>

{% block scripts %}
<script>
  document.getElementById("copyLinkBtn").addEventListener("click", function () {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(function () {
      const msg = document.getElementById("copyMsg");
      msg.style.display = "inline";
      setTimeout(() => { msg.style.display = "none"; }, 2000);
    }).catch(function (err) {
      alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·: " + err);
    });
  });
</script>
{% endblock %}
{% endblock %}